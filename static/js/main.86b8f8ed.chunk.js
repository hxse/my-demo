(this["webpackJsonpmy-react-pwa"]=this["webpackJsonpmy-react-pwa"]||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a,c=n(1),r=n.n(c),i=n(10),o=n.n(i),s=(n(16),n(9)),u=n(5),d=n.n(u),l=n(3),h=n(8),b=n(2),p=(n(18),n(11)),f=n(0);window.addEventListener("gamepadconnected",(function(e){var t=navigator.getGamepads()[e.gamepad.index];console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",t.index,t.id,t.buttons.length,t.axes.length),a=e.gamepad.index}));var j=[!1,!1,!1,!1,!1,!1];function v(e){document.querySelector("#content1")}setInterval((function(){void 0!==a&&navigator.getGamepads()[a].buttons.forEach((function(e,t){for(var n=0,a=[[0,"#up"],[1,"#down"],[2,"#up2"],[3,"#down2"],[4,"#upAll"],[5,"#downAll"]];n<a.length;n++){var c=Object(b.a)(a[n],2),r=c[0],i=c[1];t==r&&(e.pressed?(0==j[r]&&document.querySelector(i).click(),j[r]=!0):j[r]=!1)}}))}),100);var g=function(){var e=this,t=r.a.useState(),n=Object(b.a)(t,2),a=n[0],i=n[1];function o(e,t){console.log(e,t),i(e.i)}var u=r.a.useState(),j=Object(b.a)(u,2);j[0],j[1],document.addEventListener("keydown",(function(e){}));var g=r.a.useState("\u8bf7\u8f93\u5165\u6587\u4ef6"),w=Object(b.a)(g,2),O=w[0],x=w[1],k=r.a.useState("\u8bf7\u8f93\u5165\u6587\u4ef6"),m=Object(b.a)(k,2),S=m[0],y=m[1],C=r.a.useState(),A=Object(b.a)(C,2),N=A[0],T=A[1],E=r.a.useState(),W=Object(b.a)(E,2),R=(W[0],W[1]),G=r.a.useState(),L=Object(b.a)(G,2),M=L[0],U=L[1],F=r.a.useState(),D=Object(b.a)(F,2),P=D[0],B=D[1],I=r.a.useState(),J=Object(b.a)(I,2),q=J[0],$=J[1],z=r.a.useState(),H=Object(b.a)(z,2),K=H[0],Q=H[1],V=r.a.useState(),X=Object(b.a)(V,2),Y=X[0],Z=X[1];function _(){return ee.apply(this,arguments)}function ee(){return(ee=Object(h.a)(d.a.mark((function e(){var t,n,a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:8000/config/get/ATG");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,R(t),T(t.currentChapters),U(Math.max.apply(Math,Object(s.a)(t.currentRow[0]))),B(Math.max.apply(Math,Object(s.a)(t.currentRow[1]))),$(t.history),n=t.currentChapters,a=0,c=["chinese","english"];case 13:if(!(a<c.length)){e.next=33;break}return r=c[a],e.next=17,fetch("http://127.0.0.1:8000/ATG/".concat(r,"/").concat(n));case 17:return t=e.sent,e.next=20,t.json();case 20:t=e.sent,e.t0=r,e.next="chinese"===e.t0?24:"english"===e.t0?27:30;break;case 24:return x(t),U((function(e){return Q(t[e]),e})),e.abrupt("break",30);case 27:return y(t),B((function(e){return Z(t[e]),v(t[e]),e})),e.abrupt("break",30);case 30:a++,e.next=13;break;case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){var n=new FileReader;n.onload=function(t){var n=t.target.result.split("\n");switch(e){case 0:x(n);break;case 1:y(n)}},n.readAsText(t.target.files[0])}function ne(e,t,n){var a=[[M],[P]];function c(e,t){return r.apply(this,arguments)}function r(){return(r=Object(h.a)(d.a.mark((function e(t,n){var a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(t),c="http://127.0.0.1:8000/config/update/ATG?config=".concat(a),e.next=4,fetch(c);case 4:return r=e.sent,e.next=7,r.json();case 7:r=e.sent,n&&_();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){var e=t?M+1:M-1;return U(e),Q(O[e]),e>=O.length?"over":e<0?"pass":(a[0]=[e],void R((function(e){return c(e=Object(l.a)(Object(l.a)({},e),{},{currentRow:a})),e})))}function o(){var e=t?P+1:P-1;return B(e),Z(S[e]),v(S[e]),e>=S.length?"over":e<0?"pass":(a[1]=[e],void R((function(e){return c(e=Object(l.a)(Object(l.a)({},e),{},{currentRow:a})),e})))}function s(e){R((function(t){var n="up"==e?t.currentChapters-1:t.currentChapters+1;return c(t=Object(l.a)(Object(l.a)({},t),{},{currentChapters:n,currentRow:[[0],[0]]}),!0),t}))}switch(e){case"all":var u=i(),b=o();"pass"==u&&"pass"==b&&s("up"),"over"==u&&"over"==b&&s("down");break;case 0:i();break;case 1:o();break;case"chapterUp":s("up");break;case"chapterDown":s("down")}}Object(c.useEffect)((function(){_(),console.log("\u521d\u59cb\u5316\u8fd0\u884c")}),[]);var ae=Object(f.jsx)("hr",{className:"hr-twill"});return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(p.a,{className:"container",children:[Object(f.jsxs)("div",{className:"file",children:[Object(f.jsx)("input",{type:"file",id:"input",onChange:te.bind(this,0)}),Object(f.jsx)("input",{type:"file",id:"input2",onChange:te.bind(this,1)})]}),Object(f.jsxs)("div",{children:["\u7b2c",N,"\u7ae0, ",M,"\u884c, ",P,"\u884c, ",q?q[1][0][0][1]:void 0,Object(f.jsx)("hr",{className:"hr-edge-weak"})]}),Object(f.jsxs)("div",{id:"reader",className:"content",children:[Object(f.jsxs)("div",{id:"content1",children:[Y?Y.split(" ").map((function(t){return Object(f.jsxs)("span",{onMouseEnter:o.bind(e,{i:t}),onTouchStart:o.bind(e,{i:t}),children:[t," "]})})):void 0,ae]}),Object(f.jsxs)("div",{id:"content2",children:[K,ae]}),Object(f.jsx)("div",{id:"translate",children:a})]}),Object(f.jsxs)("div",{className:"footer",children:[Object(f.jsx)("button",{id:"up",onClick:ne.bind(this,0,0),children:"\u4e0a0"}),Object(f.jsx)("button",{id:"down",onClick:ne.bind(this,0,1),children:"\u4e0b0"}),Object(f.jsx)("button",{id:"up2",onClick:ne.bind(this,1,0),children:"\u4e0a1"}),Object(f.jsx)("button",{id:"down2",onClick:ne.bind(this,1,1),children:"\u4e0b1"}),Object(f.jsx)("button",{id:"upAll",onClick:ne.bind(this,"all",0),children:"\u4e0a\u5168"}),Object(f.jsx)("button",{id:"downAll",onClick:ne.bind(this,"all",1),children:"\u4e0b\u5168"}),Object(f.jsx)("button",{id:"chapterUp",onClick:ne.bind(this,"chapterUp",0),children:"\u4e0a\u7ae0"}),Object(f.jsx)("button",{id:"chapterDown",onClick:ne.bind(this,"chapterDown",1),children:"\u4e0b\u7ae0"})]})]})})},w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");w?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):O(t,e)}))}}(),x()}},[[20,1,2]]]);
//# sourceMappingURL=main.86b8f8ed.chunk.js.map