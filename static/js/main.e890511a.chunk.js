(this["webpackJsonpmy-react-pwa"]=this["webpackJsonpmy-react-pwa"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),o=n(11),i=n.n(o),s=(n(17),n(10)),l=n(3),u=n.n(l),d=n(4),h=n(7),p=n(2),b=n(8),f=(n(19),n(12)),j=n(0),v=[[0,"#content1HrDown"],[1,"#content1HrUp"],[2,"#content2HrDown"],[3,"#content2HrUp"],[4,"#upAll"],[5,"#downAll"]],w=[[0,1,"#down"],[1,1,"#down2"],[0,-1,"#up"],[1,-1,"#up2"]];window.addEventListener("gamepadconnected",(function(e){var t=navigator.getGamepads()[e.gamepad.index];console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",t.index,t.id,t.buttons.length,t.axes.length),c=e.gamepad.index}));var g=[!1,!1,!1,!1,!1,!1],O=[!1,!1,!1,!1];setInterval((function(){if(void 0!==c){var e=navigator.getGamepads()[c],t=e.axes.filter((function(e){return 1==e||-1==e})).length;if(1==t&&e.axes.forEach((function(e,t){var n,c=Object(b.a)(w);try{for(c.s();!(n=c.n()).done;){var r=Object(p.a)(n.value,3),a=r[0],o=r[1],i=r[2];if(a==t&&o==e){var s=-1==e?a+2:a;0==O[s]&&(O[s]=!0,document.querySelector(i).click())}}}catch(l){c.e(l)}finally{c.f()}})),0==t&&O.filter((function(e){return 1==e})).length>0)for(var n in O)O[n]=!1;e.buttons.forEach((function(e,t){var n,c=Object(b.a)(v);try{for(c.s();!(n=c.n()).done;){var r=Object(p.a)(n.value,2),a=r[0],o=r[1];t==a&&(e.pressed?(0==g[a]&&document.querySelector(o).click(),g[a]=!0):g[a]=!1)}}catch(i){c.e(i)}finally{c.f()}}))}}),100);var x=function(){var e=this;function t(e,t){var n=document.querySelector(e);n.scrollTop="down"==t?n.scrollTop+.85*n.clientHeight:n.scrollTop-.85*n.clientHeight;var c,r,a,o=n.getBoundingClientRect().bottom,i=n.getBoundingClientRect().top,s=Object(b.a)(n.querySelectorAll("span"));try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.getBoundingClientRect().top,d=l.getBoundingClientRect().bottom;u<i&&d>i&&(r=u-i),u<o&&d>o&&(c=o-d)}}catch(h){s.e(h)}finally{s.f()}console.log(r,c,n.scrollHeight,n.scrollTop),console.log("\u8bd5\u8bd5",n.scrollHeight-n.scrollTop,n.scrollTop,n.clientHeight),c=c||0,r=r||0,"down"==t?n.scrollHeight-n.scrollTop>n.clientHeight&&(n.scrollTop=n.scrollTop+r):n.scrollTop>n.clientHeight&&(n.scrollTop=n.scrollTop-c)}var n=a.a.useState(),c=Object(p.a)(n,2),o=c[0],i=c[1],l=a.a.useState(),v=Object(p.a)(l,2),w=v[0],g=v[1];function O(e){return e?Object.keys(e).map((function(t){return"".concat(t,":").concat(e[t])})).join("\n"):null}function x(e,t){return m.apply(this,arguments)}function m(){return(m=Object(h.a)(u.a.mark((function e(t,n){var c,r,a,o,s,l,d,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.i.trim().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()\u2026]/g,""),r=[],a=0,o=[!1,!0];case 3:if(!(a<o.length)){e.next=16;break}return s=o[a],e.next=7,fetch("http://127.0.0.1:8000/dict/".concat(c,"?stem=").concat(s));case 7:return l=e.sent,e.next=10,l.json();case 10:d=e.sent,h=d?{word:d.word,phonetic:d.phonetic,translate:d.translation}:{},r.push(h);case 13:a++,e.next=3;break;case 16:r[1].word==r[0].word&&(r[1]=null),i(r[0]),g(r[1]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=a.a.useState(),y=Object(p.a)(k,2);y[0],y[1],document.addEventListener("keydown",(function(e){}));var C=a.a.useState("\u8bf7\u8f93\u5165\u6587\u4ef6"),S=Object(p.a)(C,2),T=S[0],H=S[1],N=a.a.useState("\u8bf7\u8f93\u5165\u6587\u4ef6"),A=Object(p.a)(N,2),R=A[0],U=A[1],D=a.a.useState(),E=Object(p.a)(D,2),W=E[0],q=E[1],B=a.a.useState(),G=Object(p.a)(B,2),L=(G[0],G[1]),M=a.a.useState(),F=Object(p.a)(M,2),P=F[0],I=F[1],J=a.a.useState(),$=Object(p.a)(J,2),_=$[0],z=$[1],K=a.a.useState(),Q=Object(p.a)(K,2),V=Q[0],X=Q[1],Y=a.a.useState(),Z=Object(p.a)(Y,2),ee=Z[0],te=Z[1],ne=a.a.useState(),ce=Object(p.a)(ne,2),re=ce[0],ae=ce[1];function oe(){return ie.apply(this,arguments)}function ie(){return(ie=Object(h.a)(u.a.mark((function e(){var t,n,c,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:8000/config/get/ATG");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,L(t),q(t.currentChapters),I(Math.max.apply(Math,Object(s.a)(t.currentRow[0]))),z(Math.max.apply(Math,Object(s.a)(t.currentRow[1]))),X(t.history),n=t.currentChapters,c=0,r=["chinese","english"];case 13:if(!(c<r.length)){e.next=33;break}return a=r[c],e.next=17,fetch("http://127.0.0.1:8000/ATG/".concat(a,"/").concat(n));case 17:return t=e.sent,e.next=20,t.json();case 20:t=e.sent,e.t0=a,e.next="chinese"===e.t0?24:"english"===e.t0?27:30;break;case 24:return H(t),I((function(e){return te(t[e]),e})),e.abrupt("break",30);case 27:return U(t),z((function(e){return ae(t[e]),document.querySelector("#content1").scrollTop=0,e})),e.abrupt("break",30);case 30:c++,e.next=13;break;case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){var n=new FileReader;n.onload=function(t){var n=t.target.result.split("\n");switch(e){case 0:H(n);break;case 1:U(n)}},n.readAsText(t.target.files[0])}function le(e,t,n){var c=[[P],[_]];function r(e,t){return a.apply(this,arguments)}function a(){return(a=Object(h.a)(u.a.mark((function e(t,n){var c,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.stringify(t),r="http://127.0.0.1:8000/config/update/ATG?config=".concat(c),e.next=4,fetch(r);case 4:return a=e.sent,e.next=7,a.json();case 7:a=e.sent,n&&oe();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){var e=t?P+1:P-1;return I(e),te(T[e]),e>=T.length?"over":e<0?"pass":(c[0]=[e],void L((function(e){return r(e=Object(d.a)(Object(d.a)({},e),{},{currentRow:c})),e})))}function i(){var e=t?_+1:_-1;return z(e),ae(R[e]),document.querySelector("#content1").scrollTop=0,e>=R.length?"over":e<0?"pass":(c[1]=[e],void L((function(e){return r(e=Object(d.a)(Object(d.a)({},e),{},{currentRow:c})),e})))}function s(e){L((function(t){var n="up"==e?t.currentChapters-1:t.currentChapters+1;return r(t=Object(d.a)(Object(d.a)({},t),{},{currentChapters:n,currentRow:[[0],[0]]}),!0),t}))}switch(e){case"all":var l=o(),p=i();"pass"==l&&"pass"==p&&s("up"),"over"==l&&"over"==p&&s("down");break;case 0:o();break;case 1:i();break;case"chapterUp":s("up");break;case"chapterDown":s("down")}}return Object(r.useEffect)((function(){oe(),document.querySelector("div.container").height-=1,console.log("\u521d\u59cb\u5316\u8fd0\u884c")}),[]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"container",style:{height:.95*Object(f.a)()},children:[Object(j.jsxs)("div",{className:"file",children:[Object(j.jsx)("input",{type:"file",id:"input",onChange:se.bind(this,0)}),Object(j.jsx)("input",{type:"file",id:"input2",onChange:se.bind(this,1)})]}),Object(j.jsxs)("div",{children:["\u7b2c",W,"\u7ae0, ",P,"\u884c, ",_,"\u884c, ",V?V[1][0][0][1]:void 0,",\u7248\u672c1.1",Object(j.jsx)("hr",{className:"hr-edge-weak"})]}),Object(j.jsxs)("div",{id:"reader",className:"content",children:[Object(j.jsx)("div",{id:"content1",children:re?re.split(" ").map((function(t){return Object(j.jsxs)("span",{onMouseEnter:x.bind(e,{i:t}),children:[t," "]})})):void 0}),Object(j.jsxs)("div",{className:"hr-wrapper",children:[Object(j.jsx)("hr",{id:"content1HrUp",className:"hr-twill",onClick:t.bind(this,"#content1","up")}),Object(j.jsx)("hr",{id:"content1HrDown",className:"hr-twill",onClick:t.bind(this,"#content1","down")})]}),Object(j.jsx)("div",{id:"content2",children:ee}),Object(j.jsxs)("div",{className:"hr-wrapper",children:[Object(j.jsx)("hr",{id:"content2HrUp",className:"hr-twill",onClick:t.bind(this,"#content2","up")}),Object(j.jsx)("hr",{id:"content2HrDown",className:"hr-twill",onClick:t.bind(this,"#content2","down")})]}),Object(j.jsxs)("div",{id:"translate",children:[Object(j.jsx)("div",{children:O(o)}),Object(j.jsx)("div",{children:O(w)})]}),Object(j.jsxs)("div",{className:"hr-wrapper",children:[Object(j.jsx)("hr",{id:"translateHrUp",className:"hr-twill",onClick:t.bind(this,"#translate","up")}),Object(j.jsx)("hr",{id:"translateHrDown",className:"hr-twill",onClick:t.bind(this,"#translate","down")})]})]}),Object(j.jsxs)("div",{className:"footer",children:[Object(j.jsx)("button",{id:"up",onClick:le.bind(this,0,0),children:"\u4e0a0"}),Object(j.jsx)("button",{id:"down",onClick:le.bind(this,0,1),children:"\u4e0b0"}),Object(j.jsx)("button",{id:"up2",onClick:le.bind(this,1,0),children:"\u4e0a1"}),Object(j.jsx)("button",{id:"down2",onClick:le.bind(this,1,1),children:"\u4e0b1"}),Object(j.jsx)("button",{id:"upAll",onClick:le.bind(this,"all",0),children:"\u4e0a\u5168"}),Object(j.jsx)("button",{id:"downAll",onClick:le.bind(this,"all",1),children:"\u4e0b\u5168"}),Object(j.jsx)("button",{id:"chapterUp",onClick:le.bind(this,"chapterUp",0),children:"\u4e0a\u7ae0"}),Object(j.jsx)("button",{id:"chapterDown",onClick:le.bind(this,"chapterDown",1),children:"\u4e0b\u7ae0"})]})]})})},m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(x,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");m?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):k(t,e)}))}}(),y()}},[[21,1,2]]]);
//# sourceMappingURL=main.e890511a.chunk.js.map