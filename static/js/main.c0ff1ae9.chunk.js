(this["webpackJsonpmy-react-pwa"]=this["webpackJsonpmy-react-pwa"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),o=n(10),i=n.n(o),s=(n(17),n(9)),l=n(3),u=n.n(l),d=n(4),h=n(7),p=n(11),b=n(2),j=(n(19),n(12)),f=n(0);window.addEventListener("gamepadconnected",(function(e){var t=navigator.getGamepads()[e.gamepad.index];console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",t.index,t.id,t.buttons.length,t.axes.length),c=e.gamepad.index}));var v=[!1,!1,!1,!1,!1,!1],w=[!1,!1,!1,!1];function g(e){document.querySelector("#content1")}setInterval((function(){if(void 0!==c){var e=navigator.getGamepads()[c],t=e.axes.filter((function(e){return 1==e||-1==e})).length;if(1==t&&e.axes.forEach((function(e,t){for(var n=0,c=[[0,1,"#content1HrDown"],[1,1,"#content2HrDown"],[0,-1,"#translateHrDown"],[1,-1,"#chapterDown"]];n<c.length;n++){var r=Object(b.a)(c[n],3),a=r[0],o=r[1],i=r[2];if(a==t&&o==e){var s=-1==e?a+2:a;0==w[s]&&(w[s]=!0,document.querySelector(i).click(),console.log(i,a))}}})),0==t&&w.filter((function(e){return 1==e})).length>0)for(var n in w)w[n]=!1;e.buttons.forEach((function(e,t){for(var n=0,c=[[0,"#up"],[1,"#down"],[2,"#up2"],[3,"#down2"],[4,"#upAll"],[5,"#downAll"]];n<c.length;n++){var r=Object(b.a)(c[n],2),a=r[0],o=r[1];t==a&&(e.pressed?(0==v[a]&&document.querySelector(o).click(),v[a]=!0):v[a]=!1)}}))}}),100);var O=function(){var e=this;function t(e,t){var n=document.querySelector(e);n.scrollTop="down"==t?n.scrollTop+n.clientHeight:n.scrollTop-n.clientHeight;var c,r=n.getBoundingClientRect().bottom,a=Object(p.a)(n.querySelectorAll("span"));try{for(a.s();!(c=a.n()).done;){var o=c.value,i=o.getBoundingClientRect().top,s=o.getBoundingClientRect().bottom;i<r&&s>r&&(console.log(o),n.scrollTop="down"==t?n.scrollTop+(o.getBoundingClientRect().top-r):n.scrollTop-(r-o.getBoundingClientRect().bottom))}}catch(l){a.e(l)}finally{a.f()}}var n=a.a.useState(),c=Object(b.a)(n,2),o=c[0],i=c[1],l=a.a.useState(),v=Object(b.a)(l,2),w=v[0],O=v[1];function x(e){return e?Object.keys(e).map((function(t){return"".concat(t,":").concat(e[t])})).join("\n"):null}function m(e,t){return k.apply(this,arguments)}function k(){return(k=Object(h.a)(u.a.mark((function e(t,n){var c,r,a,o,s,l,d,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.i.trim().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()\u2026]/g,""),r=[],a=0,o=[!1,!0];case 3:if(!(a<o.length)){e.next=17;break}return s=o[a],e.next=7,fetch("http://127.0.0.1:8000/dict/".concat(c,"?stem=").concat(s));case 7:return l=e.sent,e.next=10,l.json();case 10:d=e.sent,h=d?{word:d.word,phonetic:d.phonetic,translate:d.translation}:{},r.push(h),console.log(h);case 14:a++,e.next=3;break;case 17:r[1].word==r[0].word&&(r[1]=null),i(r[0]),O(r[1]);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=a.a.useState(),C=Object(b.a)(y,2);C[0],C[1],document.addEventListener("keydown",(function(e){}));var S=a.a.useState("\u8bf7\u8f93\u5165\u6587\u4ef6"),N=Object(b.a)(S,2),T=N[0],A=N[1],R=a.a.useState("\u8bf7\u8f93\u5165\u6587\u4ef6"),D=Object(b.a)(R,2),H=D[0],E=D[1],U=a.a.useState(),B=Object(b.a)(U,2),W=B[0],q=B[1],G=a.a.useState(),L=Object(b.a)(G,2),M=(L[0],L[1]),F=a.a.useState(),P=Object(b.a)(F,2),I=P[0],J=P[1],$=a.a.useState(),_=Object(b.a)($,2),z=_[0],K=_[1],Q=a.a.useState(),V=Object(b.a)(Q,2),X=V[0],Y=V[1],Z=a.a.useState(),ee=Object(b.a)(Z,2),te=ee[0],ne=ee[1],ce=a.a.useState(),re=Object(b.a)(ce,2),ae=re[0],oe=re[1];function ie(){return se.apply(this,arguments)}function se(){return(se=Object(h.a)(u.a.mark((function e(){var t,n,c,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:8000/config/get/ATG");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,M(t),q(t.currentChapters),J(Math.max.apply(Math,Object(s.a)(t.currentRow[0]))),K(Math.max.apply(Math,Object(s.a)(t.currentRow[1]))),Y(t.history),n=t.currentChapters,c=0,r=["chinese","english"];case 13:if(!(c<r.length)){e.next=33;break}return a=r[c],e.next=17,fetch("http://127.0.0.1:8000/ATG/".concat(a,"/").concat(n));case 17:return t=e.sent,e.next=20,t.json();case 20:t=e.sent,e.t0=a,e.next="chinese"===e.t0?24:"english"===e.t0?27:30;break;case 24:return A(t),J((function(e){return ne(t[e]),e})),e.abrupt("break",30);case 27:return E(t),K((function(e){return oe(t[e]),g(t[e]),e})),e.abrupt("break",30);case 30:c++,e.next=13;break;case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t){var n=new FileReader;n.onload=function(t){var n=t.target.result.split("\n");switch(e){case 0:A(n);break;case 1:E(n)}},n.readAsText(t.target.files[0])}function ue(e,t,n){var c=[[I],[z]];function r(e,t){return a.apply(this,arguments)}function a(){return(a=Object(h.a)(u.a.mark((function e(t,n){var c,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.stringify(t),r="http://127.0.0.1:8000/config/update/ATG?config=".concat(c),e.next=4,fetch(r);case 4:return a=e.sent,e.next=7,a.json();case 7:a=e.sent,n&&ie();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){var e=t?I+1:I-1;return J(e),ne(T[e]),e>=T.length?"over":e<0?"pass":(c[0]=[e],void M((function(e){return r(e=Object(d.a)(Object(d.a)({},e),{},{currentRow:c})),e})))}function i(){var e=t?z+1:z-1;return K(e),oe(H[e]),g(H[e]),e>=H.length?"over":e<0?"pass":(c[1]=[e],void M((function(e){return r(e=Object(d.a)(Object(d.a)({},e),{},{currentRow:c})),e})))}function s(e){M((function(t){var n="up"==e?t.currentChapters-1:t.currentChapters+1;return r(t=Object(d.a)(Object(d.a)({},t),{},{currentChapters:n,currentRow:[[0],[0]]}),!0),t}))}switch(e){case"all":var l=o(),p=i();"pass"==l&&"pass"==p&&s("up"),"over"==l&&"over"==p&&s("down");break;case 0:o();break;case 1:i();break;case"chapterUp":s("up");break;case"chapterDown":s("down")}}return Object(r.useEffect)((function(){ie(),document.querySelector("div.container").height-=1,console.log("\u521d\u59cb\u5316\u8fd0\u884c")}),[]),Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"container",style:{height:.95*Object(j.a)()},children:[Object(f.jsxs)("div",{className:"file",children:[Object(f.jsx)("input",{type:"file",id:"input",onChange:le.bind(this,0)}),Object(f.jsx)("input",{type:"file",id:"input2",onChange:le.bind(this,1)})]}),Object(f.jsxs)("div",{children:["\u7b2c",W,"\u7ae0, ",I,"\u884c, ",z,"\u884c, ",X?X[1][0][0][1]:void 0,Object(f.jsx)("hr",{className:"hr-edge-weak"})]}),Object(f.jsxs)("div",{id:"reader",className:"content",children:[Object(f.jsx)("div",{id:"content1",children:ae?ae.split(" ").map((function(t){return Object(f.jsxs)("span",{onMouseEnter:m.bind(e,{i:t}),children:[t," "]})})):void 0}),Object(f.jsxs)("div",{className:"hr-wrapper",children:[Object(f.jsx)("hr",{id:"content1HrUp",className:"hr-twill",onClick:t.bind(this,"#content1","up")}),Object(f.jsx)("hr",{id:"content1HrDown",className:"hr-twill",onClick:t.bind(this,"#content1","down")})]}),Object(f.jsx)("div",{id:"content2",children:te}),Object(f.jsxs)("div",{className:"hr-wrapper",children:[Object(f.jsx)("hr",{id:"content2HrUp",className:"hr-twill",onClick:t.bind(this,"#content2","up")}),Object(f.jsx)("hr",{id:"content2HrDown",className:"hr-twill",onClick:t.bind(this,"#content2","down")})]}),Object(f.jsxs)("div",{id:"translate",children:[Object(f.jsx)("div",{children:x(o)}),Object(f.jsx)("div",{children:x(w)})]}),Object(f.jsxs)("div",{className:"hr-wrapper",children:[Object(f.jsx)("hr",{id:"translateHrUp",className:"hr-twill",onClick:t.bind(this,"#translate","up")}),Object(f.jsx)("hr",{id:"translateHrDown",className:"hr-twill",onClick:t.bind(this,"#translate","down")})]})]}),Object(f.jsxs)("div",{className:"footer",children:[Object(f.jsx)("button",{id:"up",onClick:ue.bind(this,0,0),children:"\u4e0a0"}),Object(f.jsx)("button",{id:"down",onClick:ue.bind(this,0,1),children:"\u4e0b0"}),Object(f.jsx)("button",{id:"up2",onClick:ue.bind(this,1,0),children:"\u4e0a1"}),Object(f.jsx)("button",{id:"down2",onClick:ue.bind(this,1,1),children:"\u4e0b1"}),Object(f.jsx)("button",{id:"upAll",onClick:ue.bind(this,"all",0),children:"\u4e0a\u5168"}),Object(f.jsx)("button",{id:"downAll",onClick:ue.bind(this,"all",1),children:"\u4e0b\u5168"}),Object(f.jsx)("button",{id:"chapterUp",onClick:ue.bind(this,"chapterUp",0),children:"\u4e0a\u7ae0"}),Object(f.jsx)("button",{id:"chapterDown",onClick:ue.bind(this,"chapterDown",1),children:"\u4e0b\u7ae0"})]})]})})},x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function m(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(O,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");x?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):m(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):m(t,e)}))}}(),k()}},[[21,1,2]]]);
//# sourceMappingURL=main.c0ff1ae9.chunk.js.map