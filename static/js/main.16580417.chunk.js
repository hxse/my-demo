(this["webpackJsonpmy-react-pwa"]=this["webpackJsonpmy-react-pwa"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var c,a=n(3),r=n.n(a),o=n(12),i=n.n(o),s=(n(18),n(0)),l=n.n(s),u=n(7),d=n(2),h=n(9),p=n(6),f=n(5),b=(n(20),n(13)),j=(n(22),n(1)),v=[[0,"#content1HrDown"],[1,"#content1HrUp"],[2,"#content2HrDown"],[3,"#content2HrUp"],[4,"#upAll"],[5,"#downAll"]],g=[[0,1,"#down"],[1,1,"#down2"],[0,-1,"#up"],[1,-1,"#up2"]];window.addEventListener("gamepadconnected",(function(e){var t=navigator.getGamepads()[e.gamepad.index];console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",t.index,t.id,t.buttons.length,t.axes.length),c=e.gamepad.index}));var w=[!1,!1,!1,!1,!1,!1],x=[!1,!1,!1,!1];setInterval((function(){if(void 0!==c){var e=navigator.getGamepads()[c],t=e.axes.filter((function(e){return 1==e||-1==e})).length;if(1==t&&e.axes.forEach((function(e,t){var n,c=Object(f.a)(g);try{for(c.s();!(n=c.n()).done;){var a=Object(p.a)(n.value,3),r=a[0],o=a[1],i=a[2];if(r==t&&o==e){var s=-1==e?r+2:r;0==x[s]&&(x[s]=!0,document.querySelector(i).click())}}}catch(l){c.e(l)}finally{c.f()}})),0==t&&x.filter((function(e){return 1==e})).length>0)for(var n in x)x[n]=!1;e.buttons.forEach((function(e,t){var n,c=Object(f.a)(v);try{for(c.s();!(n=c.n()).done;){var a=Object(p.a)(n.value,2),r=a[0],o=a[1];t==r&&(e.pressed?(0==w[r]&&document.querySelector(o).click(),w[r]=!0):w[r]=!1)}}catch(i){c.e(i)}finally{c.f()}}))}}),100);var O=function(){var e=this,t=r.a.useState(),n=Object(p.a)(t,2);function c(e){var t,n=document.querySelector(e),c=Object(f.a)(n.querySelectorAll("span"));try{for(c.s();!(t=c.n()).done;){t.value.style.textDecoration=""}}catch(a){c.e(a)}finally{c.f()}}function o(e,t){var n,a=[],r=document.querySelector(e),o=r.getBoundingClientRect().top,i=r.getBoundingClientRect().bottom,s=Object(f.a)(r.querySelectorAll("span"));try{for(s.s();!(n=s.n()).done;){var l=n.value,u=l.getBoundingClientRect().top,d=l.getBoundingClientRect().bottom;u<o&&d<o&&a.push({name:"up",data:l,idx:a.length}),u<o&&d>o&&a.push({name:"_up",data:l,idx:a.length}),u>=o&&d<=i&&a.push({name:"content",data:l,idx:a.length}),u<i&&d>i&&a.push({name:"_down",data:l,idx:a.length}),u>i&&d>i&&a.push({name:"down",data:l,idx:a.length});"down"==t&&"_down"==a[a.length-1].name&&d-i<1&&(a[a.length-1].name="content")}}catch(x){s.e(x)}finally{s.f()}console.assert(a.length==r.querySelectorAll("span").length,"error\u6570\u91cf\u4e0d\u5bf9:",Object(h.a)(r.querySelectorAll("span")).filter((function(e){return!a.map((function(e){return e.data})).includes(e)}))),c(e);var p=a.filter((function(e){return"content"==e.name})),b=p.reduce((function(e,t,n){return 0==n?[[t]]:t.data.offsetTop==e[e.length-1][e[e.length-1].length-1].data.offsetTop?(e[e.length-1].push(t),e):[].concat(Object(h.a)(e),[[t]])}),[]),j=b[0],v=b[b.length-1],g=j[0],w=v[v.length-1];"down"==t?(r.scrollTop=r.scrollTop+(w.data.getBoundingClientRect().top-o),v.forEach((function(e){var t=e.data;t.style.textDecoration="underline",t.style.textDecorationThickness="0.02em",t.style.textDecorationStyle="solid"}))):(r.scrollTop=r.scrollTop-(i-g.data.getBoundingClientRect().bottom),j.forEach((function(e){var t=e.data;t.style.textDecoration="underline",t.style.textDecorationThickness="0.02em",t.style.textDecorationStyle="dashed"})))}n[0],n[1];var i=r.a.useState(),s=Object(p.a)(i,2),v=s[0],g=s[1],w=r.a.useState(),x=Object(p.a)(w,2),O=x[0],m=x[1];function y(e){return e?Object.keys(e).map((function(t){return"".concat(t,":").concat(e[t])})).join("\n"):null}function k(e,t){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(l.a.mark((function e(t,n){var c,a,r,o,i,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(c=t.i.trim().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()\u2026\"\u201c\u201d\?]/g,"")).endsWith("\u2019s")?c.replace("\u2019s",""):c,a=[],r=0,o=[!1,!0];case 4:if(!(r<o.length)){e.next=17;break}return i=o[r],e.next=8,fetch("http://127.0.0.1:8000/dict/".concat(c,"?stem=").concat(i));case 8:return s=e.sent,e.next=11,s.json();case 11:u=e.sent,d=u?{word:u.word,phonetic:u.phonetic,translate:u.translation}:{},a.push(d);case 14:r++,e.next=4;break;case 17:a[1].word==a[0].word&&(a[1]=null),g(a[0]),m(a[1]);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=r.a.useState(),T=Object(p.a)(C,2);T[0],T[1],document.addEventListener("keydown",(function(e){}));var N=r.a.useState("\u8bf7\u8f93\u5165\u6587\u4ef6"),A=Object(p.a)(N,2),D=A[0],q=A[1],R=r.a.useState("\u8bf7\u8f93\u5165\u6587\u4ef6"),E=Object(p.a)(R,2),U=E[0],H=E[1],B=r.a.useState(),W=Object(p.a)(B,2),G=W[0],L=W[1],M=r.a.useState(),F=Object(p.a)(M,2),P=(F[0],F[1]),_=r.a.useState(),I=Object(p.a)(_,2),J=I[0],$=I[1],z=r.a.useState(),K=Object(p.a)(z,2),Q=K[0],V=K[1],X=r.a.useState(),Y=Object(p.a)(X,2),Z=Y[0],ee=Y[1],te=r.a.useState(),ne=Object(p.a)(te,2),ce=ne[0],ae=ne[1],re=r.a.useState(),oe=Object(p.a)(re,2),ie=oe[0],se=oe[1];function le(){return ue.apply(this,arguments)}function ue(){return(ue=Object(d.a)(l.a.mark((function e(){var t,n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:8000/config/get/ATG");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,P(t),L(t.currentChapters),$(Math.max.apply(Math,Object(h.a)(t.currentRow[0]))),V(Math.max.apply(Math,Object(h.a)(t.currentRow[1]))),ee(t.history),n=t.currentChapters,a=0,r=["chinese","english"];case 13:if(!(a<r.length)){e.next=33;break}return o=r[a],e.next=17,fetch("http://127.0.0.1:8000/ATG/".concat(o,"/").concat(n));case 17:return t=e.sent,e.next=20,t.json();case 20:t=e.sent,e.t0=o,e.next="chinese"===e.t0?24:"english"===e.t0?27:30;break;case 24:return q(t),$((function(e){return ae(t[e]),document.querySelector("#content1").scrollTop=0,c("#content1"),e})),e.abrupt("break",30);case 27:return H(t),V((function(e){return se(t[e]),document.querySelector("#content1").scrollTop=0,c("#content1"),e})),e.abrupt("break",30);case 30:a++,e.next=13;break;case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){var n=new FileReader;n.onload=function(t){var n=t.target.result.split("\n");switch(e){case 0:q(n);break;case 1:H(n)}},n.readAsText(t.target.files[0])}function he(e,t,n){var a=[[J],[Q]];function r(e,t){return o.apply(this,arguments)}function o(){return(o=Object(d.a)(l.a.mark((function e(t,n){var c,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.stringify(t),a="http://127.0.0.1:8000/config/update/ATG?config=".concat(c),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:r=e.sent,n&&le();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){var e=t?J+1:J-1;return $(e),ae(D[e]),document.querySelector("#content2").scrollTop=0,c("#content2"),e>=D.length?"over":e<0?"pass":(a[0]=[e],void P((function(e){return r(e=Object(u.a)(Object(u.a)({},e),{},{currentRow:a})),e})))}function s(){var e=t?Q+1:Q-1;return V(e),se(U[e]),document.querySelector("#content1").scrollTop=0,c("#content1"),e>=U.length?"over":e<0?"pass":(a[1]=[e],void P((function(e){return r(e=Object(u.a)(Object(u.a)({},e),{},{currentRow:a})),e})))}function h(e){P((function(t){var n="up"==e?t.currentChapters-1:t.currentChapters+1;return r(t=Object(u.a)(Object(u.a)({},t),{},{currentChapters:n,currentRow:[[0],[0]]}),!0),t}))}switch(e){case"all":var p=i(),f=s();"pass"==p&&"pass"==f&&h("up"),"over"==p&&"over"==f&&h("down");break;case 0:i();break;case 1:s();break;case"chapterUp":h("up");break;case"chapterDown":h("down")}}return Object(a.useEffect)((function(){le(),document.querySelector("div.container").height-=1,console.log("\u521d\u59cb\u5316\u8fd0\u884c")}),[]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"container",style:{height:.95*Object(b.a)()},children:[Object(j.jsxs)("div",{className:"file",children:[Object(j.jsx)("input",{type:"file",id:"input",onChange:de.bind(this,0)}),Object(j.jsx)("input",{type:"file",id:"input2",onChange:de.bind(this,1)})]}),Object(j.jsxs)("div",{children:["\u7b2c",G,"\u7ae0, ",J,"\u884c, ",Q,"\u884c, ",Z?Z[1][0][0][1]:void 0,",\u7248\u672c1.1",Object(j.jsx)("hr",{className:"hr-edge-weak"})]}),Object(j.jsxs)("div",{id:"reader",className:"content",children:[Object(j.jsx)("div",{id:"content1",children:ie?ie.split(" ").map((function(t){return Object(j.jsxs)("span",{onMouseEnter:k.bind(e,{i:t}),children:[t," "]})})):void 0}),Object(j.jsxs)("div",{className:"hr-wrapper",children:[Object(j.jsx)("hr",{id:"content1HrUp",className:"hr-twill",onClick:o.bind(this,"#content1","up")}),Object(j.jsx)("hr",{id:"content1HrDown",className:"hr-twill",onClick:o.bind(this,"#content1","down")})]}),Object(j.jsxs)("div",{id:"content2",children:[" ",ce?ce.split("").map((function(e){return Object(j.jsx)("span",{children:e})})):void 0]}),Object(j.jsxs)("div",{className:"hr-wrapper",children:[Object(j.jsx)("hr",{id:"content2HrUp",className:"hr-twill",onClick:o.bind(this,"#content2","up")}),Object(j.jsx)("hr",{id:"content2HrDown",className:"hr-twill",onClick:o.bind(this,"#content2","down")})]}),Object(j.jsxs)("div",{id:"translate",children:[Object(j.jsx)("div",{children:y(v)}),Object(j.jsx)("div",{children:y(O)})]}),Object(j.jsxs)("div",{className:"hr-wrapper",children:[Object(j.jsx)("hr",{id:"translateHrUp",className:"hr-twill",onClick:o.bind(this,"#translate","up")}),Object(j.jsx)("hr",{id:"translateHrDown",className:"hr-twill",onClick:o.bind(this,"#translate","down")})]})]}),Object(j.jsxs)("div",{className:"footer",children:[Object(j.jsx)("button",{id:"up",onClick:he.bind(this,0,0),children:"\u4e0a0"}),Object(j.jsx)("button",{id:"down",onClick:he.bind(this,0,1),children:"\u4e0b0"}),Object(j.jsx)("button",{id:"up2",onClick:he.bind(this,1,0),children:"\u4e0a1"}),Object(j.jsx)("button",{id:"down2",onClick:he.bind(this,1,1),children:"\u4e0b1"}),Object(j.jsx)("button",{id:"upAll",onClick:he.bind(this,"all",0),children:"\u4e0a\u5168"}),Object(j.jsx)("button",{id:"downAll",onClick:he.bind(this,"all",1),children:"\u4e0b\u5168"}),Object(j.jsx)("button",{id:"chapterUp",onClick:he.bind(this,"chapterUp",0),children:"\u4e0a\u7ae0"}),Object(j.jsx)("button",{id:"chapterDown",onClick:he.bind(this,"chapterDown",1),children:"\u4e0b\u7ae0"})]})]})})},m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(O,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");m?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):y(t,e)}))}}(),k()}},[[23,1,2]]]);
//# sourceMappingURL=main.16580417.chunk.js.map